
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://grex-telescope.github.io/software/operation/">
      
      <link rel="icon" href="../../assets/grex_icon.svg">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.15">
    
    
      
        <title>Operation - GReX Telescope</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.c382b1dc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#operation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="GReX Telescope" class="md-header__button md-logo" aria-label="GReX Telescope" data-md-component="logo">
      
  <img src="../../assets/grex_icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GReX Telescope
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Operation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hardware/overview/" class="md-tabs__link">
        Hardware
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../overview/" class="md-tabs__link md-tabs__link--active">
        Software
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../about/" class="md-tabs__link">
      About
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="GReX Telescope" class="md-nav__button md-logo" aria-label="GReX Telescope" data-md-component="logo">
      
  <img src="../../assets/grex_icon.svg" alt="logo">

    </a>
    GReX Telescope
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Hardware
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hardware" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Hardware
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/feed/" class="md-nav__link">
        Feed Antenna
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/fem/" class="md-nav__link">
        Fronend Module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/fpga/" class="md-nav__link">
        Digital Backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/box/" class="md-nav__link">
        The Box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/assembly/" class="md-nav__link">
        Assembly Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stack/" class="md-nav__link">
        Software Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../snap/" class="md-nav__link">
        SNAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/" class="md-nav__link">
        Pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../server_setup/" class="md-nav__link">
        Server Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../box/" class="md-nav__link">
        Box Setup
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Operation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Operation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#turning-on-the-snap" class="md-nav__link">
    Turning on the SNAP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-pipeline" class="md-nav__link">
    Running the Pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#triggering-voltage-dumps" class="md-nav__link">
    Triggering voltage dumps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh-port-tunneling" class="md-nav__link">
    SSH Port Tunneling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pulse-injection" class="md-nav__link">
    Pulse Injection
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data_processing/" class="md-nav__link">
        Data Processing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#turning-on-the-snap" class="md-nav__link">
    Turning on the SNAP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-pipeline" class="md-nav__link">
    Running the Pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#triggering-voltage-dumps" class="md-nav__link">
    Triggering voltage dumps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh-port-tunneling" class="md-nav__link">
    SSH Port Tunneling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pulse-injection" class="md-nav__link">
    Pulse Injection
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="operation">Operation</h1>
<p>We'll flesh out all the details on operation soon, but in the meantime here are the critical details.</p>
<h2 id="turning-on-the-snap">Turning on the SNAP</h2>
<p>To turn on the SNAP, SSH into the Pi (as discussed in the server setup), Then on the pi create (if it
doesn't already exist) a bash script called <code>snap.sh</code> with the following:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is assuming you have a V2 power supply, ON and OFF are reversed otherwise</p>
</div>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/env bash</span>
<span class="c1"># Usage: ./snap.sh &lt;on|off&gt;</span>
<span class="nv">BASE_GPIO_PATH</span><span class="o">=</span>/sys/class/gpio
<span class="nv">PWN_PIN</span><span class="o">=</span><span class="m">20</span>
<span class="k">if</span> <span class="o">[</span> ! -e <span class="nv">$BASE_GPIO_PATH</span>/gpio<span class="nv">$PWN_PIN</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;20&quot;</span> &gt; <span class="nv">$BASE_GPIO_PATH</span>/export
<span class="k">fi</span>
<span class="nb">echo</span> <span class="s2">&quot;out&quot;</span> &gt; <span class="nv">$BASE_GPIO_PATH</span>/gpio<span class="nv">$PWN_PIN</span>/direction
<span class="k">if</span> <span class="o">[[</span> -z <span class="nv">$1</span> <span class="o">]]</span><span class="p">;</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Please pass `on` or `off` as an argument&quot;</span>
<span class="k">else</span>
    <span class="k">case</span> <span class="nv">$1</span> <span class="k">in</span>
    <span class="s2">&quot;on&quot;</span> <span class="p">|</span> <span class="s2">&quot;ON&quot;</span><span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">&quot;0&quot;</span> &gt; <span class="nv">$BASE_GPIO_PATH</span>/gpio<span class="nv">$PWN_PIN</span>/value
    <span class="p">;;</span>
    <span class="s2">&quot;off&quot;</span> <span class="p">|</span> <span class="s2">&quot;OFF&quot;</span><span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">&quot;1&quot;</span> &gt; <span class="nv">$BASE_GPIO_PATH</span>/gpio<span class="nv">$PWN_PIN</span>/value
    <span class="p">;;</span>
    *<span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">&quot;Please pass `on` or `off` as an argument&quot;</span>
    <span class="nb">exit</span> -1
    <span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">fi</span>
<span class="nb">exit</span> <span class="m">0</span>
</code></pre></div>
<p>Make it executable is <code>chmod +x snap.sh</code>, and use <code>./snap.sh &lt;on|off&gt;</code> to control the power state of the SNAP.</p>
<p>If you get permission errors when doing so, make sure your Pi's user is a member of the <code>gpio</code> group.
You can add your user to the group with:</p>
<div class="highlight"><pre><span></span><code>sudo usermod -a -G gpio <span class="k">$(</span>whoami<span class="k">)</span>
</code></pre></div>
<p>then relog and try again.</p>
<h2 id="running-the-pipeline">Running the Pipeline</h2>
<p>In the <code>grex</code> folder, under <code>pipeline</code> there is the single bash script that runs the pipeline.
Simply calling it <code>./grex.sh</code> should start everything up. By default, it will run the normal detection pipeline.
If you want to just run T0 (packet capture and first stage processing), remove the final line that calls <code>psrdada</code> and replace it (the whole line) with <code>filterbank</code>.</p>
<h2 id="triggering-voltage-dumps">Triggering voltage dumps</h2>
<p>Normally, T2 will send triggers to T0 to dump the voltage ringbuffer to disk. You can emulate this by sending a UDP packet to the trigger socket any other way. One simple way is with bash</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="s2">&quot; &quot;</span> &gt; /dev/udp/localhost/65432
</code></pre></div>
<h2 id="ssh-port-tunneling">SSH Port Tunneling</h2>
<p>In some circumstances, it may be useful to access ports on the GReX server on your local computer remotely. We can accomplish this using <a href="https://www.ssh.com/academy/ssh/tunneling-example">SSH Tunneling</a>.</p>
<p>One example of why we might want to do this is to access the 10 GbE switch configuration that is located in the
far-side GReX box. It runs a normal web page on a static ip of <code>192.168.88.1</code>. You can access this from a web
browser if you are sitting at the GReX server, but not remotely.</p>
<p>To access it using SSH tunneling, we can forward that IP's port 80 (standard HTTP) to our local computer at some
unused, non-privaleged port.</p>
<div class="highlight"><pre><span></span><code>ssh -L <span class="m">8080</span>:192.168.88.1:80 username@grex-server-address
</code></pre></div>
<p>Another example is perhaps you want to run a <a href="https://jupyter.org/hub">Jupypter Hub</a> instance on the GReX server. In that case, the website it is hosting is on the server itself, so you would run:</p>
<div class="highlight"><pre><span></span><code>ssh -L <span class="m">8080</span>:localhost:80 username@grex-server-address
</code></pre></div>
<p>Another useful one is access to the Prometheus time-series database used for monitoring. That is active on port <code>9090</code></p>
<div class="highlight"><pre><span></span><code>ssh -L <span class="m">9090</span>:localhost:9090 username@grex-server-address
</code></pre></div>
<h2 id="pulse-injection">Pulse Injection</h2>
<p>If you need to generate and inject fake pulses into raw voltages to test the pipeline, Liam Connor's <a href="https://github.com/liamconnor/injectfrb/blob/master/injectfrb/simulate_frb.py">injection codes</a> contain all the relevant tools. In a Python Jupyter notebook, you can import this Python script and use the functions within to generate a fake pulse and write it to an output .dat file.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">simulate_frb</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mf">8.192e-6</span>
<span class="n">width_sec</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">dt</span> <span class="c1"># depending on your preferred pulse width</span>
<span class="n">Nfreq</span> <span class="o">=</span> <span class="mi">2048</span>
<span class="n">data</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="n">simulate_frb</span><span class="o">.</span><span class="n">gen_simulated_frb</span><span class="p">(</span><span class="n">NFREQ</span><span class="o">=</span><span class="n">Nfreq</span><span class="p">,</span>
    <span class="n">NTIME</span><span class="o">=</span><span class="mi">16384</span><span class="p">,</span>
    <span class="n">sim</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">fluence</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="c1"># This controls the pulse SNR</span>
    <span class="n">spec_ind</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width_sec</span><span class="p">,</span>
    <span class="n">dm</span><span class="o">=</span><span class="mf">100.</span><span class="p">,</span> <span class="c1"># dispersion measure</span>
    <span class="n">background_noise</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">2048</span><span class="p">,</span> <span class="mi">16384</span><span class="p">]),</span>
    <span class="n">delta_t</span><span class="o">=</span><span class="n">dt</span><span class="p">,</span>
    <span class="n">plot_burst</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">freq</span><span class="o">=</span><span class="p">(</span><span class="mf">1530.0</span><span class="p">,</span> <span class="mf">1280.0</span><span class="p">),</span>
    <span class="n">FREQ_REF</span><span class="o">=</span><span class="mf">1405.0</span><span class="p">,</span>
    <span class="n">scintillate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">scat_tau_ref</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="n">disp_ind</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
    <span class="n">conv_dmsmear</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<p>Before writing to an output file, you might want to check what the pulse looks like and its histogram distribution, ensuring itâ€™s not all zeros due to conversion to int8 (bit type of raw voltages).</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int8</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">### also, visualize the pulse itself</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int8</span><span class="p">),</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p>If the pulse looks reasonable, we can convert to <code>int8</code> type and write to an output .dat file.
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test_injpulse0.dat&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int8</span><span class="p">)</span><span class="o">.</span><span class="n">tobytes</span><span class="p">())</span>
</code></pre></div></p>
<p>Move this .dat file to <code>~/grex/pipeline/fake/</code>, the specified directory in <code>grex.sh</code>, to actually inject the pulse. Then you could change the injection cadence (in seconds) in <code>~/grex/pipeline/.env</code> by adding the following line.</p>
<div class="highlight"><pre><span></span><code><span class="nv">injection_cadence</span><span class="o">=</span><span class="m">300</span>
</code></pre></div>
<p>Now you are good to go.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../box/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Box Setup" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Box Setup
            </div>
          </div>
        </a>
      
      
        
        <a href="../data_processing/" class="md-footer__link md-footer__link--next" aria-label="Next: Data Processing" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Data Processing
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.instant", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.a6c66575.min.js"></script>
      
    
  </body>
</html>